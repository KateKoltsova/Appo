import{f as _,_ as m,e as w,c as v,g as P,p as S,h as x,a as y}from"./app.50c87d8e.js";const s="api",i="v1",B="register",b="oauth/login",j="oauth/refresh",I="oauth/logout",L="oauth/logout/all",k="password/forgot",T="password/reset",U="password/change",h="users",A="schedules",C={auth:{register:{url:`${s}/${B}`,auth:!1},login:{url:`${s}/${b}`,auth:!1},refresh:{url:`${s}/${j}`,auth:!1},logout:{url:`${s}/${I}`,auth:!1},logoutAll:{url:`${s}/${L}`,auth:!1},forgotPassword:{url:`${s}/${k}`,auth:!1},resetPassword:{url:`${s}/${T}`,auth:!1},changePassword:{url:`${s}/${U}`,auth:!1}},users:{all:{url:`${s}/${i}/${h}`,auth:!0},byId:{url:e=>`${s}/${i}/${h}/${e}`,auth:!0}},schedules:{availableSchedules:{url:`${s}/${i}/${A}`,auth:!1}}},d=_.create({headers:{"Content-Type":"application/json"}});d.interceptors.request.use(e=>{const n=e.url;function p(o,l){const t=o.split("/").filter(Boolean),r=l.split("/").filter(Boolean),u={};for(let a=0;a<t.length;a++)if(t[a].startsWith(":")){const $=t[a].substring(1);u[$]=r[a]}return u}function f(o,l){const t=o.replace(/:[^\s/]+/g,"([^/]+)").replace(/\//g,"\\/").replace(/\./g,"\\."),r=new RegExp(`^${t}`);return l.match(r)}function g(o){for(const l of Object.values(C))for(const t of Object.values(l))if(typeof t=="object"&&t.url){const r=typeof t.url=="function"?t.url(":id"):t.url;if(f(r,o)){const a=p(r,o);return{...t,params:a}}}return null}const c=g(n);if(c!=null&&c.auth){const o=localStorage.getItem("accessToken");o&&(e.headers.Authorization=`Bearer ${o}`)}return e},e=>Promise.reject(e));d.interceptors.response.use(e=>e,e=>{var n;return e.response&&e.response.status===401&&((n=e.response)==null?void 0:n.status)===401&&(console.error("Unauthorized, redirecting to login page..."),localStorage.clear(),window.location.href="/login"),Promise.reject(e)});const N=e=>(S("data-v-1788573f"),e=e(),x(),e),z={key:0,class:"loading-spinner"},E=N(()=>y("div",{class:"spinner"},null,-1)),O=[E],V={__name:"LoadingSpinner",props:{isLoading:Boolean},setup(e){return(n,p)=>e.isLoading?(w(),v("div",z,O)):P("",!0)}},F=m(V,[["__scopeId","data-v-1788573f"]]);export{F as L,d as a,C as u};
