import{r,o as p,c as m,a as e,w as u,v as d,b as v,n as f,d as g,u as _,e as w}from"./app.ccb8f526.js";import{L as h,a as I,u as b}from"./LoadingSpinner.f87b9d35.js";const k=e("h2",null,"Login",-1),L=e("label",{for:"email"},"Email:",-1),S=e("label",{for:"password"},"\u041F\u0430\u0440\u043E\u043B\u044C:",-1),y=e("button",{type:"submit"},"\u0412\u043E\u0439\u0442\u0438",-1),B={__name:"LoginPage",setup(T){const l=r(""),n=r(""),i=_(),t=r(!1);p(async()=>{const s=localStorage.getItem("accessToken"),a=localStorage.getItem("userId");s&&a&&await i.push("/profile")});const c=async()=>{try{t.value=!0;const s=await I({url:b.auth.login.url,method:"POST",data:{email:l.value,password:n.value}});if(s.status===200){const{access_token:a,id:o}=s.data.data;localStorage.setItem("accessToken",a),localStorage.setItem("userId",o),await i.push("/profile")}else console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0430\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u0438")}catch(s){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0441\u0435\u0442\u0438:",s)}t.value=!1};return(s,a)=>(w(),m("div",null,[k,e("form",{onSubmit:v(c,["prevent"]),class:f({disabled:t.value})},[e("div",null,[L,u(e("input",{type:"email","onUpdate:modelValue":a[0]||(a[0]=o=>l.value=o),required:""},null,512),[[d,l.value]])]),e("div",null,[S,u(e("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=o=>n.value=o),required:""},null,512),[[d,n.value]])]),y],34),g(h,{isLoading:t.value},null,8,["isLoading"])]))}};export{B as default};
